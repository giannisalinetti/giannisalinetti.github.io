---
import SpotifyPlayer from "./SpotifyPlayer.astro";

interface Props {
  title: string;
  description: string;
  date: Date;
  spotifyUrl: string;
  type: string;
  artist?: string;
  slug: string;
  tags: string[];
}

const { title, description, date, spotifyUrl, type, artist, slug, tags } = Astro.props;

const typeLabel = type.charAt(0).toUpperCase() + type.slice(1);
---

<div class="flex flex-col gap-4 group">
  <SpotifyPlayer spotifyUrl={spotifyUrl} title={title} compact />
  <a href={`/recordings/${slug}`} class="block">
    <div class="flex items-center gap-2 mb-1">
      <span class="text-xs font-semibold uppercase tracking-wider text-primary dark:text-primary-dark">{typeLabel}</span>
      <span class="opacity-40">&middot;</span>
      <span class="text-xs opacity-60">
        {date.toLocaleDateString("en-US", { day: "numeric", month: "short", year: "numeric" })}
      </span>
    </div>
    <h4 class="text-xl font-semibold group-hover:text-primary dark:group-hover:text-primary-dark group-hover:underline underline-offset-4 transition-colors">
      {title}
    </h4>
    {artist && <p class="text-sm opacity-60 mt-1">{artist}</p>}
    <p class="opacity-80 mt-2 line-clamp-2">{description}</p>
  </a>
  {tags.length > 0 && (
    <div class="flex flex-wrap gap-2">
      {tags.map((tag) => (
        <span class="text-xs px-2 py-0.5 rounded-full bg-foreground/5 dark:bg-foreground-dark/10 opacity-70">{tag}</span>
      ))}
    </div>
  )}
</div>
